# 字典管理功能说明

## 功能概述

字典管理功能提供了一个统一的界面来管理系统的字典集合和字典数据。

## 页面结构

### 1. 集合管理页面：DictionaryManagement.jsx

**路由**：`/sys/dictionary`

**功能**：管理字典集合（类似数据库的表）

**操作**：
- 新建集合：创建新的字典集合
- 编辑集合：修改集合的配置
- 删除集合：删除集合及其所有数据
- 管理数据：点击进入该集合的数据管理页面
- 搜索筛选：按名称、访问类型、状态筛选

**集合配置项**：
- 集合名称：唯一标识符（只能使用小写字母和下划线）
- 显示名称：用于界面显示
- 描述：集合的说明
- 数据类型：object、array、string、number、boolean、image、file
- 访问类型：
  - 后台私有：仅后台可访问
  - C端公开读：C端可读取
  - C端公开读写：C端可读写
  - 用户私有：每个用户只能访问自己的数据
- 最大条目数：集合最多可存储的数据条数
- 每用户最大条目数：用户私有类型集合的每用户限制
- 状态：启用/禁用

### 2. 数据管理页面：DictionaryDataManagement.jsx

**路由**：`/sys/dictionary/:collection`

**功能**：管理指定集合中的字典数据

**操作**：
- 新建数据：在集合中添加新数据
- 编辑数据：修改现有数据
- 删除数据：删除数据
- 搜索筛选：按键、状态筛选

**数据配置项**：
- 集合：所属集合（自动填充，不可修改）
- 键：数据的唯一标识符
- 值：JSON 格式的数据（使用 JSON 编辑器）
- 排序：控制显示顺序
- 状态：启用/禁用
- 备注：数据说明

## JSON 编辑器

### 特性
- 实时 JSON 格式验证
- 语法高亮显示
- 格式化功能
- 错误提示

### 使用方法
1. 在值输入框中输入 JSON 格式的数据
2. 如果格式错误，会显示红色边框和错误提示
3. 点击"格式化"链接可以自动格式化 JSON

### 示例

```json
{
  "name": "测试数据",
  "value": 123,
  "enabled": true,
  "tags": ["tag1", "tag2"]
}
```

## 路由配置

### 集合管理
- 路由：`/sys/dictionary`
- 组件：`DictionaryManagement`
- 权限码：`DictionaryManagement`
- 显示：在系统管理菜单中

### 数据管理
- 路由：`/sys/dictionary/:collection`
- 组件：`DictionaryDataManagement`
- 权限码：`DictionaryDataManagement`
- 显示：隐藏路由，通过集合管理页面进入

## 使用流程

1. 进入字典管理页面（`/sys/dictionary`）
2. 在集合管理页面中：
   - 可以新建、编辑、删除集合
   - 点击"管理数据"按钮进入该集合的数据管理页面
3. 在数据管理页面中：
   - 查看集合信息
   - 使用 JSON 编辑器新建、编辑数据
   - 通过面包屑导航返回集合管理页面

## 使用场景

### 1. 系统配置管理
创建 `system_config` 集合，存储系统配置参数。

### 2. 游戏服务器列表
创建 `game_servers` 集合，管理游戏服务器配置。

### 3. C端应用配置
创建 `app_config` 集合（公开读），供C端读取配置。

### 4. 用户偏好设置
创建 `user_preferences` 集合（用户私有），存储用户个人设置。

## 注意事项

1. **集合名称**：创建后不可修改，请谨慎命名
2. **数据键**：创建后不可修改
3. **删除集合**：会同时删除该集合下的所有数据，请谨慎操作
4. **JSON 格式**：值必须是有效的 JSON 格式
5. **访问类型**：根据实际需求选择合适的访问类型

## 开发规范

遵循项目开发规范：
- 使用 `useMount` 和 `useUnmount` 管理生命周期
- 正确配置 useCallback 依赖项
- 所有 API 调用通过 Service 层
- 页码从 1 开始
